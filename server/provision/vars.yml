---
project_name: okapi
ssh_private_key: ~/.ssh/okapi_servers
server_user: ubuntu
git_repo: https://github.com/patrickspencer/okapi.git
system_packages:
  - git
  - nginx
  - gunicorn
  - postgresql
  - postgresql-server-dev-all
  - python-pip
  - python3-pip
  - python3-dev
  - python3-psycopg2

# db
db_user: "{{ project_name }}"
db_name: "{{ project_name }}_db"
db_password: password
ansible_distribution_release:

# virtualenv
virtualenv_python_version: python3

# Project settings.
project_parent_dir: /home/ubuntu
project_path: "{{ project_parent_dir }}/{{ project_name }}"
virtualenv_path: "/home/ubuntu/.virtualenvs/okapi"
project_log_dir: "{{ project_parent_dir }}/okapi_logs"
project_log_file: "{{ project_log_dir }}/gunicorn_supervisor.log"
requirements_file: "{{ project_path }}/requirements/production.txt"

# Gunicorn settings.
gunicorn_user: "{{ project_name }}"
gunicorn_group: webapps
gunicorn_sock_file: "{{ project_parent_dir }}/okapi_gunicorn.sock"

# Nginx settings.
nginx_access_log_file: "{{ project_log_dir }}/nginx_access.log"
nginx_error_log_file: "{{ project_log_dir }}/nginx_error.log"
nginx_static_dir: "{{ project_path }}/server_static_files"
nginx_media_dir: "{{ project_path }}/media/"
nginx_server_name: "{{ inventory_hostname }}"

# Django environment variables.
django_environment:
  DJANGO_SETTINGS_MODULE: "{{ django_settings_file }}"
  DJANGO_SECRET_KEY: "{{ django_secret_key }}"
  MEDIA_ROOT: "{{ nginx_media_dir }}"
  STATIC_ROOT: "{{ nginx_static_dir }}"
  DATABASE_NAME: "{{ db_name }}"
  DATABASE_USER: "{{ db_user }}"
  DATABASE_PASSWORD: "{{ db_password }}"
  BROKER_URL: "{{ broker_url }}"
